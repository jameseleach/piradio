This is notes.txt
Step-by-step?
    Install Raspberry Pi OS Lite (32-bit)

    Enable SSH and Configure Wi-Fi
        https://www.raspberrypi.org/documentation/configuration/wireless/headless.md

    Ensure system is up to date:
        `sudo apt update`
        `sudo apt upgrade`

    Run `raspi-config` and:
        system options:
            change password
            change hostname
        interface options:
            enable i2c
        localisation options:
            change locale
            set timezone
            set wlan country

    Install and configure Mopidy
        https://docs.mopidy.com/en/latest/installation/raspberrypi/#how-to-for-raspbian


    Install Mopidy extensions:

        Search for avaialble packages:
        `apt search mopidy`
        Install via `apt` if avaialble.  If not, check to see if the pacakage is avaialble via `pip`.

        sudo apt install mopidy-alsamixer/stable
        sudo apt install mopidy-somafm/stable
        sudo apt install mopidy-mpd/stable
        sudo apt install mopidy-local/stable

    Install more Mopidy extensions via pip if necessary.  No need to install something via `pip` if it was available via `apt`

        Search for packages:
        `python3 -m pip search mopidy` is broken and likely to remain broken.   
        Search via the web: https://pypi.org/search/?q=mopidy

    What, no PIP?
        sudo apt install python3-pip

        Iris is a good default web client:
            https://pypi.org/project/Mopidy-Iris/

            `sudo python3 -m pip install --upgrade Mopidy-Iris`
            Add to mopidy.conf:
                [iris]
                country = US
                locale = en_US

        Muse is a very nice client: 
            https://pypi.org/project/Mopidy-Muse/
            
            `sudo python3 -m pip install --upgrade Mopidy-Muse`
            Add to mopidy.conf:
                [muse]
                enabled = true
                # the following are optional values
                mopidy_host = localhost
                mopidy_port = 6680
                mopidy_ssl = false
                snapcast_host = localhost
                snapcast_port = 1780
                snapcast_ssl = false
                
        Default playlist.  
            https://pypi.org/project/Mopidy-DefaultPlaylist/

            `sudo python3 -m pip install --upgrade Mopidy-DefaultPlaylist`
            Add to mopidy.conf:
                [defaultplaylist]
                enabled = true
                defaultplaylist_name = Top Hits
                autoplay = true
                shuffle = true

    Install packages required for this code:
        `sudo python3 -m pip install --upgrade Pillow python-mpd2 luma.oled`


    New resources?
        https://pypi.org/project/mopidy-pidi/
        `python3 -m pip install Mopidy-PiDi`

        https://pypi.org/project/mopidy-raspberry-gpio/
        `python3 -m pip install Mopidy-Raspberry-GPIO`
    
        https://pypi.org/project/pidi-display-pil/
        `python3 -m pip install pidi-display-pil`



Requirements for this code:

    Install required Python packages:
        python-mpd2
            Tested python-mpd2 3.0.4
            https://pypi.org/project/python-mpd2/

        gpiozero
            Tested with gpiozero 1.5.1
            https://pypi.org/project/gpiozero/

            `sudo apt install python3-gpiozero`
        Pillow
            Tested with Pillow 8.1.0
            https://pypi.org/project/Pillow/

        Luma.core
            Tested with luma.core 2.2.0
            https://pypi.org/project/luma.core/

            This should be installed by luma.oled
        Luma.oled
            Tested with luma.oled 3.8.1
            https://pypi.org/project/luma.oled/


    * set the i2c bus speed to 1mhz:
        modify /boot/config.txt:
            dtparam=i2c_arm=on
            dtparam=i2c_arm_baudrate=1000000

ToDo:   
    Implement default volume
    Timeout for volume screen - return to channel?
    Shorter static sound - no hard stop when the sound is playing?

Mopidy Config Files:

    pi@jukebox:~ $ sudo cat /usr/share/mopidy/conf.d/mopidy.conf
    # These are default configurations modified by the mopidy Debian package.
    #
    # This file should not be modified. Everything can be overriden by
    # `/etc/mopidy/mopidy.conf`.

    [core]
    cache_dir = /var/cache/mopidy
    config_dir = /etc/mopidy
    data_dir = /var/lib/mopidy

    [logging]
    format = %(levelname)-8s [%(threadName)s] %(name)s %(message)s
    color = false

    pi@jukebox:~ $ sudo cat /usr/share/mopidy/conf.d/mopidy-local.conf
    [local]
    media_dir = /var/lib/mopidy/media
    pi@jukebox:~ $ 

    pi@jukebox:~ $ sudo cat /etc/mopidy/mopidy.conf
    # For information about configuration values that can be set in this file see:
    #
    #   https://docs.mopidy.com/en/latest/config/
    #
    # Run `sudo mopidyctl config` to see the current effective config, based on
    # both defaults and this configuration file.

    [mpd]
    enabled = true
    hostname = ::

    [audio]
    # mixer = software
    # output = alsasink
    mixer = alsamixer

    [alsamixer]
    card = 0
    control = "Headphone"
    min_volume = 0
    max_volume = 100
    volume_scale = cubic

    [http]
    enabled = true
    hostname = ::
    port = 6680
    zeroconf = Mopidy HTTP server on $hostname
    allowed_origins =
    csrf_protection = true
    default_app = mopidy
    pi@jukebox:~ $ 


OLD:

    MPC is still useful
    `sudo apt install mpc`
    MPC Info:
    https://www.mankier.com/1/mpc

    PiFi Radio https://github.com/rccavalcanti/pifi-radio
        Pros: Super clean, simple web UI.
        Cons: No song info, no graphics for stations

        Uses JSON for station list.  I can work with this.
    

    modify the /etc/mdp.conf file: 
        uncomment this line:
            bind_to_address         "/run/mpd/socket"
        comment out this line:
            bind_to_address     "localhost:

        modify these two lines from:
            music_directory     "/var/lib/mpd/music"
            playlist_directory  "/var/lib/mpd/playlists"
        to:
            music_directory     "/home/pi/piradio/audio/music"
            playlist_directory  "/home/pi/piradio/audio/playlists"

        Review this to determine proper audio_output settings:
        https://www.raspberrypi.org/forums/viewtopic.php?t=150505
        
        This works for me on my Pi:
        audio_output {
                type            "alsa"
                name            "ALSA Onboard Audio"
                device          "hw:CARD=Headphones,DEV=0"
                mixer_type      "hardware"
                mixer_device    "default"
                mixer_control   "Headphone"
                mixer_index     "0"
        }
